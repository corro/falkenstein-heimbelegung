<?php/** * Belegungs-Detail Controller für das Heimbelegungs Component *  * @package    Falkenstein.Joomla * @subpackage Components * @link       http://www.pfadi-falkenstein.ch * @license    GNU/GPL */// no direct accessdefined( '_JEXEC' ) or die( 'Restricted access' );// Import der Basisklassejimport( 'joomla.application.component.controller' );/** * Belegungs-Detail Controller * * @package     Falkenstein.Joomla * @subpackage  Components */class Belegung_DetailController extends JController{    /**     * Custom Constructor     */    function __construct( $default = array())    {        parent::__construct( $default );        $this->addModelPath( JPATH_COMPONENT_ADMINISTRATOR .DS.'models' );        // Register Extra tasks        $this->registerTask( 'add', 'edit' );    }    /**     * Editieransicht     */    function edit()    {        JRequest::setVar( 'view', 'belegung_detail' );        JRequest::setVar( 'layout', 'form' );        JRequest::setVar( 'hidemainmenu', 1 );        parent::display();    }    /**     * Speicheraufruf     */    function save()    {        // Sicherheitsüberprüfung zum Verhindern von Request-Fälschungen        JRequest::checkToken() or jexit('Invalid Token');        $model = $this->getModel();        $post = JRequest::get('post');        // Speichern der Informationen        if ($model->store($post)) {            $msg = 'Tageler erfolgreich gespeichert';        } else {            $msg = 'Fehler beim Speichern des Tagelers';        }        $this->setRedirect('index.php?option=com_heimbelegung', $msg);    }    /**     * Abbruchaufruf -> Redirect     */    function cancel()    {        $this->setRedirect('index.php?option=com_heimbelegung');    }}